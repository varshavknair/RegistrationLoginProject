!function(){"use strict";var c,e="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this||{},l={};function f(e){this.type="iHTML",this.html=e||"",this.events={}}function i(e,t){if(!(this instanceof i))return new i(e,onEnd,onFound);this.tokenizers=e.splice?e:[e],t&&(this.doBuild=t)}function s(e){for(var t=0;t<e.length;t++)e[t].trigger("j2h.ready")}function u(e,r){var o=[];return e.find("[-j2h-e]").each(function(){var e=c(this).attr("-j2h-e");if(e)for(var t=e.split(" "),n=0;n<t.length;n++){var a=r[t[n]];a&&(a.data.action=a.action,"ready"===a.type&&(o.push(c(this)),a.type="j2h.ready"),c(this).on(a.type,a.data,function(e){"function"===v((e.data.event=e).data.action)&&e.data.action.call(c(this),e.data)}))}c(this).removeAttr("-j2h-e")}),o}function m(e,t,n,a,r){var o=new f;switch(v(e,!0)){case"array":for(var c=e.length,s=0;s<c;++s)o.append(p(e[s],t,n,s,r));break;case"undefined":case"null":break;default:o.append(p(e,t,n,a,r))}return o}function p(e,t,n,a,r){var o=new f;switch(v(t,!0)){case"array":for(var c=t.length,s=0;s<c;++s)o.append(p(e,t[s],n,a));break;case"object":var i=t["{}"]||t.obj;"function"!==v(i)||r?t["[]"]?o.append(function(e,t,n,a,r){var o,c=new f,s={template:void 0,name:void 0};for(o in n)switch(o){case"[]":var i=b(e||t,n,o,a,r);a.components&&(s.template=a.components[i]),s.template||(s.template=l[i]);break;case"html":"object"===v(n.html)&&(a.$ihtml=m(t,n.html,a,r))}return"object"!==v(s.template)||c.append(m(t,s.template,a)),c}(r,e,t,n,a)):o.append(function(e,t,n,a,r){var o,c=new f,s=new f,i="<>",l=[];for(o in n)switch(o){case"tag":i="tag";case"<>":c.name=b(e||t,n,i,a,r),c.appendHTML("<"+c.name);break;case"obj":case"{}":break;case"text":j(n[o])||s.appendHTML(json2html.toText(b(t,n,o,a,r)));break;case"children":case"html":switch(v(n[o],!0)){case"array":s.append(m(t,n[o],a,r));break;case"function":var u=n[o].call(t,t,r,a.data,a.$ihtml);switch(v(u,!0)){case"object":"iHTML"===u.type&&s.append(u);break;case"function":case"undefined":case"null":break;case"array":s.appendHTML(u.toString());break;default:s.appendHTML(u)}break;default:s.appendHTML(b(t,n,o,a,r))}break;default:var p,d,h=!1;2<o.length&&"on"===o.substring(0,2).toLowerCase()&&("ihtml"===a.output&&(p={obj:t,data:a.data,index:r},d=function(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return e()+e()}(),c.events[d]={type:o.substring(2),data:p,action:n[o]},l.push(d)),h=!0),h||void 0!==(h=b(t,n,o,a,r))&&(h="string"==typeof h?'"'+h.replace(/"/g,"&quot;")+'"':h,c.appendHTML(" "+o+"="+h))}l.length&&c.appendHTML(" -j2h-e='"+l.join(" ")+"'");c.name?!function(e){switch(e){case"area":case"base":case"br":case"col":case"command":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":return!0;default:return!1}}(c.name)?(c.appendHTML(">"),c.append(s),c.appendHTML("</"+c.name+">")):c.appendHTML("/>"):c.append(s);return c}(r,e,t,n,a)):(r=e,e=i.call(e,e,a),o.append(m(e,t,n,a,r)))}return o}function b(n,e,t,a,r){var o="",c=e[t];switch(v(c,!0)){case"function":switch(v(n)){case"object":return c.call(n,n,r,a.data);case"function":case"undefined":case"null":return"";default:var s={value:n,index:r,data:a.data};return c.call(s,s,r,a.data)}break;case"string":if(json2html.es6)switch(v(n)){case"object":o=json2html.es6.interpolate.call(c,n);break;case"function":case"undefined":case"null":return"";default:o=json2html.es6.interpolate.call(c,{value:n,index:r})}else o=function(e,a){let t=new i([/\${([\w\.\,\$]+)}/],function(e,t,n){return t?e.replace(n,a):e});return t.parse(e).join("")}(c,function(e,t){switch(v(n)){case"object":return function(e,t){for(var n=t.split("."),a=e,r=n.length,o=0;o<r&&!(0<n[o].length&&null==(a=a[n[o]]));++o);return null==a?"":a}(n,t);case"function":case"undefined":case"null":return"";default:switch(t){case"value":return n;case"index":return null==r?"":r}}});break;case"null":case"undefined":case"object":o="";break;default:o=c.toString()}return o}function j(e){return"[object Array]"===Object.prototype.toString.call(e)}function v(e,t){var n=typeof e;if("object"==n){if(null===e)return"null";if(t&&j(e))return"array"}return n}f.prototype.append=function(e){return e&&"iHTML"===e.type&&(this.html+=e.html,Object.assign(this.events,e.events)),this},f.prototype.appendHTML=function(e){this.html+=e},f.prototype.toJSON=function(){return{html:this.html,events:this.events}},i.prototype.parse=function(e){for(this.src=e,this.ended=!1,this.tokens=[];this.next(),!this.ended;);return this.tokens},i.prototype.build=function(e,t){e&&this.tokens.push(this.doBuild?this.doBuild(e,t,this.tkn):e)},i.prototype.next=function(){var e,t=this;t.findMin(),e=t.src.slice(0,t.min),t.build(e,!1),t.src=t.src.slice(t.min).replace(t.tkn,function(e){return t.build(e,!0),""}),t.src||(t.ended=!0)},i.prototype.findMin=function(){var e,t,n=this,a=0;for(n.min=-1,n.tkn="";void 0!==(e=n.tokenizers[a++]);)-1!=(t=n.src[e.test?"search":"indexOf"](e))&&(-1==n.min||t<n.min)&&(n.tkn=e,n.min=t);-1==n.min&&(n.min=n.src.length)},e.json2html||(e.json2html={}),e.json2html.version="2.2.1",e.json2html.render=function(t,e,n){var a=new f,r={output:"html"};n&&(n.events&&(r.output="ihtml"),r.components=n.components,r.data=n.data,n.output&&(r.output=n.output));n=t;if("string"==typeof t)try{n=JSON.parse(t)}catch(e){n=t}return t=n,"object"===v(e)&&"object"===v(t)&&(a=m(t,e,r)),"ihtml"!==r.output?a.html:a},e.json2html.component={add:function(e,t){switch(typeof e){case"object":l=function(){for(var e={},t=arguments.length,n=0;n<t;n++)for(var a in arguments[n])e[a]=arguments[n][a];return e}(l,e);break;case"string":l[e]=t}},get:function(e){return l[e]}},e.json2html.iHTML=f,e.json2html.toText=function(e){return null==e?"":e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;").replace(/\//g,"&#x2F;")},e.json2html.transform=e.json2html.render,"object"==typeof window&&window.jQuery&&((c=window.jQuery).json2html=function(e,t,n){if("undefined"!=typeof json2html){var a={output:"ihtml"};switch(n&&(n.eventData&&(a.data=a.eventData),a.components=n.components,a.data=n.data,n.output&&(a.output=n.output)),a.output){case"json2html":case"ihtml":a.output="ihtml"}return json2html.render(e,t,a)}},c.fn.json2html=function(a,r,e){if("undefined"!=typeof json2html){var o={output:"ihtml",method:"append"};return e&&(e.eventData&&(o.data=o.eventData),e.method&&(o.method=e.method),e.prepend&&(o.method="prepend"),e.replace&&(o.method="replace"),e.append&&(o.method="append"),o.components=e.components,o.data=e.data),this.each(function(){var e,t,n=(e=json2html.render(a,r,o),t=c(document.createElement("i")).html(e.html),e=u(c(t),e.events),{parent:c(t).children(),ready:e});switch(o.method){case"replace":c.fn.replaceWith.call(c(this),n.parent);break;case"prepend":c.fn.prepend.call(c(this),n.parent);break;default:c.fn.append.call(c(this),n.parent)}s(n.ready)})}},c.fn.j2hHydrate=function(e){return this.each(function(){s(u(c(this),e))})})}();